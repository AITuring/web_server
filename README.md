# python实现简单的web服务器
[链接](https://www.shiyanlou.com/courses/552)
## 1.原理
一般web程序都运行在 TCP/IP 协议上，程序之间使用 socket(套接字) 进行通信，它能够让计算机之间的通信就像写文件和读文件一样简单。 一个 tcp socket 由一个IP地址和端口号组成。

IP地址是一个32位的二进制数，通常被分割为4个“8位二进制数”,写成10进制的形式就是我们常见的 174.136.14.108。我们通过IP地址来标识所连接的主机。

端口号是一个范围在0-65535之间的数字，一台主机上可能同时有多个sockets，因此需要端口号进行标识。端口号0-1023 是保留给操作系统使用的，我们可以使用剩下的端口号。

超文本传输协议（HTTP）描述了一种程序之间交换数据的方法，它非常简单易用，在一个socket连接上，客户端首先发送请求说明它需要什么，然后服务器发送响应，并在响应中包含客户端的数据。响应数据也许是从本地磁盘上复制来的，也许是程序动态生成的。传输过程如下：
1. 客户端向服务器端发起TCP连接
2. 服务器接受连接
3. 客户端发送包含URL的http请求
4. 服务器接受请求并发送包含index.html文本的响应
5. 客户端收到响应并解析
6. 服务器关闭连接
   
http请求就是一段文本，任何程序都能生成一个http请求，这段文本需要包含以下部分：
- http method：http请求方法。常用的是GET(抓取数据)和post(更新数据或者上传数据)
- URL：通常是客户端请求的文件路径
- http vision ：http版本。
- header field：http头的键值对，做一些基本的设置，例如：
```html
//客户端接受的数据类型
Accept:text/html
//客户端接受的语言
Accept-Language:en
```
- body:一些与请求有关的负载数据。比如在一个网站登陆的时候提交登陆表单，那负载数据就是你的账号与密码信息。
  
## 2.开发准备
这里使用`httpie`代替浏览器发送请求并打印响应信息。

配置`httpie`:
```bash
pip install httpie
```
## 3.开发
web服务器基本概念非常简单：

1. 等待某个人连接我们的服务器并向我们发送一个HTTP请求
2. 解析该请求
3. 了解该请求希望请求的内容
4. 服务器根据请求抓取需要的数据（从服务器本地文件中读取或者程序动态生成）
5. 将数据格式化为请求需要的格式
6. 返回HTTP响应
   
步骤1、2、6的操作对所有web应用都是一样的，这部分内容Python标准库中的 `BaseHTTPServer` 模块可以帮助我们处理。我们只需要关注步骤3～5。